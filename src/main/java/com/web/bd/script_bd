drop database if exists AA1;

CREATE DATABASE AA1;

USE AA1;

CREATE TABLE User (
    id BIGINT NOT NULL AUTO_INCREMENT,
    username VARCHAR(10) NOT NULL,
    senha VARCHAR(50) NOT NULL,
    email VARCHAR(30) NOT NULL UNIQUE,
    role ENUM('ADMIN', 'TESTER') NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE Project (
    id BIGINT NOT NULL AUTO_INCREMENT,
    name VARCHAR(10) NOT NULL,
    description VARCHAR(300) NOT NULL,
    date DATE NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE ProjectUser (
    projeto_id BIGINT NOT NULL,
    usuario_id BIGINT NOT NULL,
    PRIMARY KEY (projeto_id, usuario_id),
    FOREIGN KEY (projeto_id) REFERENCES Project(id),
    FOREIGN KEY (usuario_id) REFERENCES User(id)
);

CREATE TABLE Strategy (
    id BIGINT NOT NULL AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    description VARCHAR(300) NOT NULL,
    examples VARCHAR(1000) NOT NULL,
    tips VARCHAR(300) NOT NULL,
    images TEXT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE TestSession (
    id BIGINT NOT NULL AUTO_INCREMENT,
    testerName VARCHAR(10) NOT NULL,
    userId BIGINT NOT NULL,
    strategyId BIGINT NOT NULL,
    projetoId BIGINT NOT NULL,
    duration INT NOT NULL,
    description VARCHAR(300),
    status ENUM('CREATED', 'IN_EXECUTION', 'FINISHED') DEFAULT 'CREATED',
    creationDateTime DATETIME DEFAULT CURRENT_TIMESTAMP,
    startDateTime DATETIME,
    finishDateTime DATETIME,
    PRIMARY KEY (id),
    FOREIGN KEY (userId) REFERENCES User(id),
    FOREIGN KEY (strategyId) REFERENCES Strategy(id),
    FOREIGN KEY (projetoId) REFERENCES Project(id)
);


INSERT INTO Strategy (name, description, examples, tips, images)
VALUES (
    'Equivalence Partitioning',
    'Técnica que divide entradas em partições válidas e inválidas para reduzir o número de casos de teste.',
    'Exemplo: Para idade válida entre 18-65, partições seriam <18 (inválida), 18-65 (válida), >65 (inválida).',
    'Certifique-se de testar pelo menos um valor de cada partição.',
    NULL
);

INSERT INTO Strategy (name, description, examples, tips, images)
VALUES (
    'Edasdasdsadas',
    'Técnica sdadasque divide entradas em partições válidas e inválidas para reduzir o número de casos de teste.',
    'Exemplo: Para dsadasidade válida entre 18-65, partições seriam <18 (inválida), 18-65 (válida), >65 (inválida).',
    'Certifique-se saddasdsade testar pelo menos um valor de cada partição.',
    NULL
);

INSERT INTO Project (name, description, date)
VALUES (
    'AppTeste',
    'Aplicativo para gerenciamento de tarefas com foco em produtividade.',
    CURDATE()
);

INSERT INTO Project (name, description, date)
VALUES (
    'sadsate',
    'Aplicads para gerenciamento de tarefas com foco em produtividade.',
    CURDATE()
);


INSERT INTO User (username, senha, email, role)
VALUES (
    'joao123',
    '123',
    'joao@example.com',
    'TESTER'
);

INSERT INTO User (username, senha, email, role)
VALUES (
    'paulo',
    '123',
    'joao1@example.com',
    'TESTER'
);